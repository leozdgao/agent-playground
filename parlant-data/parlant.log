[2m2025-10-05T09:27:48.680967Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T09:27:48.681233Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T09:27:48.683418Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T09:27:50.730398Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized OpenAIService[0m
[2m2025-10-05T09:28:16.753438Z[0m [[31m[1merror    [0m] [1m[<main>][GuidelineContinuousProposer][OpenAISchematicGenerator][LLM Request (GuidelineContinuousPropositionSchema)] LLM Request (GuidelineContinuousPropositionSchema) failed[0m
[2m2025-10-05T09:28:16.754064Z[0m [[31m[1merror    [0m] [1m[<main>][GuidelineContinuousProposer][OpenAISchematicGenerator][LLM Request (GuidelineContinuousPropositionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/adapters/nlp/openai_service.py", line 137, in generate
    return await self._do_generate(prompt, hints)
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/adapters/nlp/openai_service.py", line 193, in _do_generate
    response = await self._client.chat.completions.create(
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/openai/resources/chat/completions/completions.py", line 2585, in create
    return await self._post(
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/openai/_base_client.py", line 1794, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/openai/_base_client.py", line 1594, in request
    raise self._make_status_error_from_response(err.response) from None
 openai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}
[0m
[2m2025-10-05T09:28:16.755803Z[0m [[33m[1mwarning  [0m] [1m[<main>][GuidelineContinuousProposer][OpenAISchematicGenerator][LLM Request (GuidelineContinuousPropositionSchema)] GuidelineContinuousProposer attempt 0 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/services/indexing/guideline_continuous_proposer.py", line 69, in propose_continuous\n    proposition = await self._generate_continuous(\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/services/indexing/guideline_continuous_proposer.py", line 179, in _generate_continuous\n    response = await self._schematic_generator.generate(\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 135, in wrapped_func\n    return await func(state, *args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 144, in wrapped_func\n    return await policy.apply(state, func, *args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 60, in apply\n    return await func(state, *args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 144, in wrapped_func\n    return await policy.apply(state, func, *args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 60, in apply\n    return await func(state, *args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 125, in wrapped_func\n    return await func(*args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/adapters/nlp/openai_service.py", line 137, in generate\n    return await self._do_generate(prompt, hints)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/adapters/nlp/openai_service.py", line 193, in _do_generate\n    response = await self._client.chat.completions.create(\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/openai/resources/chat/completions/completions.py", line 2585, in create\n    return await self._post(\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/openai/_base_client.py", line 1794, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/openai/_base_client.py", line 1594, in request\n    raise self._make_status_error_from_response(err.response) from None\n', "openai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n"][0m
[2m2025-10-05T09:28:16.889401Z[0m [[31m[1merror    [0m] [1m[<main>][GuidelineContinuousProposer][OpenAISchematicGenerator][LLM Request (GuidelineContinuousPropositionSchema)][OpenAISchematicGenerator][LLM Request (GuidelineContinuousPropositionSchema)] LLM Request (GuidelineContinuousPropositionSchema) failed[0m
[2m2025-10-05T09:28:16.889790Z[0m [[31m[1merror    [0m] [1m[<main>][GuidelineContinuousProposer][OpenAISchematicGenerator][LLM Request (GuidelineContinuousPropositionSchema)][OpenAISchematicGenerator][LLM Request (GuidelineContinuousPropositionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/adapters/nlp/openai_service.py", line 137, in generate
    return await self._do_generate(prompt, hints)
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/adapters/nlp/openai_service.py", line 193, in _do_generate
    response = await self._client.chat.completions.create(
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/openai/resources/chat/completions/completions.py", line 2585, in create
    return await self._post(
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/openai/_base_client.py", line 1794, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/openai/_base_client.py", line 1594, in request
    raise self._make_status_error_from_response(err.response) from None
 openai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}
[0m
[2m2025-10-05T09:28:16.890266Z[0m [[33m[1mwarning  [0m] [1m[<main>][GuidelineContinuousProposer][OpenAISchematicGenerator][LLM Request (GuidelineContinuousPropositionSchema)][OpenAISchematicGenerator][LLM Request (GuidelineContinuousPropositionSchema)] GuidelineContinuousProposer attempt 1 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/services/indexing/guideline_continuous_proposer.py", line 69, in propose_continuous\n    proposition = await self._generate_continuous(\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/services/indexing/guideline_continuous_proposer.py", line 179, in _generate_continuous\n    response = await self._schematic_generator.generate(\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 135, in wrapped_func\n    return await func(state, *args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 144, in wrapped_func\n    return await policy.apply(state, func, *args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 60, in apply\n    return await func(state, *args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 144, in wrapped_func\n    return await policy.apply(state, func, *args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 60, in apply\n    return await func(state, *args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 125, in wrapped_func\n    return await func(*args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/adapters/nlp/openai_service.py", line 137, in generate\n    return await self._do_generate(prompt, hints)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/adapters/nlp/openai_service.py", line 193, in _do_generate\n    response = await self._client.chat.completions.create(\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/openai/resources/chat/completions/completions.py", line 2585, in create\n    return await self._post(\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/openai/_base_client.py", line 1794, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/openai/_base_client.py", line 1594, in request\n    raise self._make_status_error_from_response(err.response) from None\n', "openai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n"][0m
[2m2025-10-05T09:28:17.076430Z[0m [[31m[1merror    [0m] [1m[<main>][GuidelineContinuousProposer][OpenAISchematicGenerator][LLM Request (GuidelineContinuousPropositionSchema)][OpenAISchematicGenerator][LLM Request (GuidelineContinuousPropositionSchema)][OpenAISchematicGenerator][LLM Request (GuidelineContinuousPropositionSchema)] LLM Request (GuidelineContinuousPropositionSchema) failed[0m
[2m2025-10-05T09:28:17.076834Z[0m [[31m[1merror    [0m] [1m[<main>][GuidelineContinuousProposer][OpenAISchematicGenerator][LLM Request (GuidelineContinuousPropositionSchema)][OpenAISchematicGenerator][LLM Request (GuidelineContinuousPropositionSchema)][OpenAISchematicGenerator][LLM Request (GuidelineContinuousPropositionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/adapters/nlp/openai_service.py", line 137, in generate
    return await self._do_generate(prompt, hints)
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/adapters/nlp/openai_service.py", line 193, in _do_generate
    response = await self._client.chat.completions.create(
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/openai/resources/chat/completions/completions.py", line 2585, in create
    return await self._post(
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/openai/_base_client.py", line 1794, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/openai/_base_client.py", line 1594, in request
    raise self._make_status_error_from_response(err.response) from None
 openai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}
[0m
[2m2025-10-05T09:28:17.077426Z[0m [[33m[1mwarning  [0m] [1m[<main>][GuidelineContinuousProposer][OpenAISchematicGenerator][LLM Request (GuidelineContinuousPropositionSchema)][OpenAISchematicGenerator][LLM Request (GuidelineContinuousPropositionSchema)][OpenAISchematicGenerator][LLM Request (GuidelineContinuousPropositionSchema)] GuidelineContinuousProposer attempt 2 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/services/indexing/guideline_continuous_proposer.py", line 69, in propose_continuous\n    proposition = await self._generate_continuous(\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/services/indexing/guideline_continuous_proposer.py", line 179, in _generate_continuous\n    response = await self._schematic_generator.generate(\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 135, in wrapped_func\n    return await func(state, *args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 144, in wrapped_func\n    return await policy.apply(state, func, *args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 60, in apply\n    return await func(state, *args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 144, in wrapped_func\n    return await policy.apply(state, func, *args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 60, in apply\n    return await func(state, *args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 125, in wrapped_func\n    return await func(*args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/adapters/nlp/openai_service.py", line 137, in generate\n    return await self._do_generate(prompt, hints)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/adapters/nlp/openai_service.py", line 193, in _do_generate\n    response = await self._client.chat.completions.create(\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/openai/resources/chat/completions/completions.py", line 2585, in create\n    return await self._post(\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/openai/_base_client.py", line 1794, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/openai/_base_client.py", line 1594, in request\n    raise self._make_status_error_from_response(err.response) from None\n', "openai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n"][0m
[2m2025-10-05T09:28:17.078240Z[0m [[32m[1minfo     [0m] [1m[<main>] Evaluation task 'qMspHiXAn9' failed due to the following error: 'Evaluation failed'[0m
[2m2025-10-05T09:28:17.661179Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (2)[0m
[2m2025-10-05T09:28:17.661369Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-05T09:28:17.662278Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/services/indexing/guideline_continuous_proposer.py", line 69, in propose_continuous\n    proposition = await self._generate_continuous(\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/services/indexing/guideline_continuous_proposer.py", line 179, in _generate_continuous\n    response = await self._schematic_generator.generate(\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 135, in wrapped_func\n    return await func(state, *args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 144, in wrapped_func\n    return await policy.apply(state, func, *args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 60, in apply\n    return await func(state, *args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 144, in wrapped_func\n    return await policy.apply(state, func, *args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 60, in apply\n    return await func(state, *args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/nlp/policies.py", line 125, in wrapped_func\n    return await func(*args, **kwargs)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/adapters/nlp/openai_service.py", line 137, in generate\n    return await self._do_generate(prompt, hints)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/adapters/nlp/openai_service.py", line 193, in _do_generate\n    response = await self._client.chat.completions.create(\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/openai/resources/chat/completions/completions.py", line 2585, in create\n    return await self._post(\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/openai/_base_client.py", line 1794, in post\n    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/openai/_base_client.py", line 1594, in request\n    raise self._make_status_error_from_response(err.response) from None\n', "openai.PermissionDeniedError: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}\n", '\nThe above exception was the direct cause of the following exception:\n\n', 'Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 746, in evaluate\n    continuous_propositions = await self._propose_continuous(\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 864, in _propose_continuous\n    sparse_results = await async_utils.safe_gather(*tasks)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.10/site-packages/parlant/core/services/indexing/guideline_continuous_proposer.py", line 86, in propose_continuous\n    raise EvaluationError() from last_generation_exception\n', 'parlant.core.services.indexing.common.EvaluationError: Evaluation failed\n'][0m
[2m2025-10-05T09:42:43.969605Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T09:42:43.970496Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T09:42:43.972989Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T09:46:14.585821Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T09:46:14.586623Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T09:46:14.591864Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T10:04:21.011716Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T10:04:21.012229Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T10:04:21.016202Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T10:20:24.832195Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T10:20:24.833178Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T10:20:24.835357Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T10:20:59.152913Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T10:20:59.153232Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T10:20:59.155289Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T10:21:09.637503Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-05T10:22:41.767367Z[0m [[31m[1merror    [0m] [1m[<main>][GuidelineContinuousProposer][LiteLLM Request (GuidelineContinuousPropositionSchema)] LiteLLM Request (GuidelineContinuousPropositionSchema) failed[0m
[2m2025-10-05T10:22:41.775395Z[0m [[31m[1merror    [0m] [1m[<main>][GuidelineContinuousProposer][LiteLLM Request (GuidelineContinuousPropositionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 183, in _make_common_sync_call
    response = sync_httpx_client.post(
               ^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/http_handler.py", line 802, in post
    raise e
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/http_handler.py", line 784, in post
    response.raise_for_status()
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
 httpx.HTTPStatusError: Client error '403 Forbidden' for url 'https://openrouter.ai/api/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
 
During handling of the above exception, another exception occurred:

 Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/main.py", line 2730, in completion
    response = base_llm_http_handler.completion(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 485, in completion
    response = self._make_common_sync_call(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 208, in _make_common_sync_call
    raise self._handle_error(e=e, provider_config=provider_config)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 3025, in _handle_error
    raise provider_config.get_error_class(
 litellm.llms.openrouter.common_utils.OpenRouterException: {"error":{"message":"Provider returned error","code":403,"metadata":{"raw":"{\"error\":{\"code\":\"unsupported_country_region_territory\",\"message\":\"Country, region, or territory not supported\",\"param\":null,\"type\":\"request_forbidden\"}}","provider_name":"OpenAI"}},"user_id":"user_2uQmigFdRnnn3PM4oWpB4b5i7Lv"}
 
During handling of the above exception, another exception occurred:

 Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 125, in _do_generate
    response = self._client.completion(
               ^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/utils.py", line 1356, in wrapper
    raise e
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/utils.py", line 1231, in wrapper
    result = original_function(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/main.py", line 3733, in completion
    raise exception_type(
          ^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py", line 2273, in exception_type
    raise e
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py", line 2206, in exception_type
    raise APIError(
 litellm.exceptions.APIError: litellm.APIError: APIError: OpenrouterException - {"error":{"message":"Provider returned error","code":403,"metadata":{"raw":"{\"error\":{\"code\":\"unsupported_country_region_territory\",\"message\":\"Country, region, or territory not supported\",\"param\":null,\"type\":\"request_forbidden\"}}","provider_name":"OpenAI"}},"user_id":"user_2uQmigFdRnnn3PM4oWpB4b5i7Lv"}
[0m
[2m2025-10-05T10:22:41.784592Z[0m [[33m[1mwarning  [0m] [1m[<main>][GuidelineContinuousProposer][LiteLLM Request (GuidelineContinuousPropositionSchema)] GuidelineContinuousProposer attempt 0 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 183, in _make_common_sync_call\n    response = sync_httpx_client.post(\n               ^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/http_handler.py", line 802, in post\n    raise e\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/http_handler.py", line 784, in post\n    response.raise_for_status()\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status\n    raise HTTPStatusError(message, request=request, response=self)\n', "httpx.HTTPStatusError: Client error '403 Forbidden' for url 'https://openrouter.ai/api/v1/chat/completions'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403\n", '\nDuring handling of the above exception, another exception occurred:\n\n', 'Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/main.py", line 2730, in completion\n    response = base_llm_http_handler.completion(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 485, in completion\n    response = self._make_common_sync_call(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 208, in _make_common_sync_call\n    raise self._handle_error(e=e, provider_config=provider_config)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 3025, in _handle_error\n    raise provider_config.get_error_class(\n', 'litellm.llms.openrouter.common_utils.OpenRouterException: {"error":{"message":"Provider returned error","code":403,"metadata":{"raw":"{\\"error\\":{\\"code\\":\\"unsupported_country_region_territory\\",\\"message\\":\\"Country, region, or territory not supported\\",\\"param\\":null,\\"type\\":\\"request_forbidden\\"}}","provider_name":"OpenAI"}},"user_id":"user_2uQmigFdRnnn3PM4oWpB4b5i7Lv"}\n', '\nDuring handling of the above exception, another exception occurred:\n\n', 'Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/guideline_continuous_proposer.py", line 69, in propose_continuous\n    proposition = await self._generate_continuous(\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/guideline_continuous_proposer.py", line 179, in _generate_continuous\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 125, in _do_generate\n    response = self._client.completion(\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/utils.py", line 1356, in wrapper\n    raise e\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/utils.py", line 1231, in wrapper\n    result = original_function(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/main.py", line 3733, in completion\n    raise exception_type(\n          ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py", line 2273, in exception_type\n    raise e\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py", line 2206, in exception_type\n    raise APIError(\n', 'litellm.exceptions.APIError: litellm.APIError: APIError: OpenrouterException - {"error":{"message":"Provider returned error","code":403,"metadata":{"raw":"{\\"error\\":{\\"code\\":\\"unsupported_country_region_territory\\",\\"message\\":\\"Country, region, or territory not supported\\",\\"param\\":null,\\"type\\":\\"request_forbidden\\"}}","provider_name":"OpenAI"}},"user_id":"user_2uQmigFdRnnn3PM4oWpB4b5i7Lv"}\n'][0m
[2m2025-10-05T10:22:42.292233Z[0m [[31m[1merror    [0m] [1m[<main>][GuidelineContinuousProposer][LiteLLM Request (GuidelineContinuousPropositionSchema)][LiteLLM Request (GuidelineContinuousPropositionSchema)] LiteLLM Request (GuidelineContinuousPropositionSchema) failed[0m
[2m2025-10-05T10:22:42.300177Z[0m [[31m[1merror    [0m] [1m[<main>][GuidelineContinuousProposer][LiteLLM Request (GuidelineContinuousPropositionSchema)][LiteLLM Request (GuidelineContinuousPropositionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 183, in _make_common_sync_call
    response = sync_httpx_client.post(
               ^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/http_handler.py", line 802, in post
    raise e
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/http_handler.py", line 784, in post
    response.raise_for_status()
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
 httpx.HTTPStatusError: Client error '403 Forbidden' for url 'https://openrouter.ai/api/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
 
During handling of the above exception, another exception occurred:

 Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/main.py", line 2730, in completion
    response = base_llm_http_handler.completion(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 485, in completion
    response = self._make_common_sync_call(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 208, in _make_common_sync_call
    raise self._handle_error(e=e, provider_config=provider_config)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 3025, in _handle_error
    raise provider_config.get_error_class(
 litellm.llms.openrouter.common_utils.OpenRouterException: {"error":{"message":"Provider returned error","code":403,"metadata":{"raw":"{\"error\":{\"code\":\"unsupported_country_region_territory\",\"message\":\"Country, region, or territory not supported\",\"param\":null,\"type\":\"request_forbidden\"}}","provider_name":"OpenAI"}},"user_id":"user_2uQmigFdRnnn3PM4oWpB4b5i7Lv"}
 
During handling of the above exception, another exception occurred:

 Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 125, in _do_generate
    response = self._client.completion(
               ^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/utils.py", line 1356, in wrapper
    raise e
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/utils.py", line 1231, in wrapper
    result = original_function(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/main.py", line 3733, in completion
    raise exception_type(
          ^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py", line 2273, in exception_type
    raise e
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py", line 2206, in exception_type
    raise APIError(
 litellm.exceptions.APIError: litellm.APIError: APIError: OpenrouterException - {"error":{"message":"Provider returned error","code":403,"metadata":{"raw":"{\"error\":{\"code\":\"unsupported_country_region_territory\",\"message\":\"Country, region, or territory not supported\",\"param\":null,\"type\":\"request_forbidden\"}}","provider_name":"OpenAI"}},"user_id":"user_2uQmigFdRnnn3PM4oWpB4b5i7Lv"}
[0m
[2m2025-10-05T10:22:42.309242Z[0m [[33m[1mwarning  [0m] [1m[<main>][GuidelineContinuousProposer][LiteLLM Request (GuidelineContinuousPropositionSchema)][LiteLLM Request (GuidelineContinuousPropositionSchema)] GuidelineContinuousProposer attempt 1 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 183, in _make_common_sync_call\n    response = sync_httpx_client.post(\n               ^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/http_handler.py", line 802, in post\n    raise e\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/http_handler.py", line 784, in post\n    response.raise_for_status()\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status\n    raise HTTPStatusError(message, request=request, response=self)\n', "httpx.HTTPStatusError: Client error '403 Forbidden' for url 'https://openrouter.ai/api/v1/chat/completions'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403\n", '\nDuring handling of the above exception, another exception occurred:\n\n', 'Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/main.py", line 2730, in completion\n    response = base_llm_http_handler.completion(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 485, in completion\n    response = self._make_common_sync_call(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 208, in _make_common_sync_call\n    raise self._handle_error(e=e, provider_config=provider_config)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 3025, in _handle_error\n    raise provider_config.get_error_class(\n', 'litellm.llms.openrouter.common_utils.OpenRouterException: {"error":{"message":"Provider returned error","code":403,"metadata":{"raw":"{\\"error\\":{\\"code\\":\\"unsupported_country_region_territory\\",\\"message\\":\\"Country, region, or territory not supported\\",\\"param\\":null,\\"type\\":\\"request_forbidden\\"}}","provider_name":"OpenAI"}},"user_id":"user_2uQmigFdRnnn3PM4oWpB4b5i7Lv"}\n', '\nDuring handling of the above exception, another exception occurred:\n\n', 'Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/guideline_continuous_proposer.py", line 69, in propose_continuous\n    proposition = await self._generate_continuous(\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/guideline_continuous_proposer.py", line 179, in _generate_continuous\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 125, in _do_generate\n    response = self._client.completion(\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/utils.py", line 1356, in wrapper\n    raise e\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/utils.py", line 1231, in wrapper\n    result = original_function(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/main.py", line 3733, in completion\n    raise exception_type(\n          ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py", line 2273, in exception_type\n    raise e\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py", line 2206, in exception_type\n    raise APIError(\n', 'litellm.exceptions.APIError: litellm.APIError: APIError: OpenrouterException - {"error":{"message":"Provider returned error","code":403,"metadata":{"raw":"{\\"error\\":{\\"code\\":\\"unsupported_country_region_territory\\",\\"message\\":\\"Country, region, or territory not supported\\",\\"param\\":null,\\"type\\":\\"request_forbidden\\"}}","provider_name":"OpenAI"}},"user_id":"user_2uQmigFdRnnn3PM4oWpB4b5i7Lv"}\n'][0m
[2m2025-10-05T10:22:42.636580Z[0m [[31m[1merror    [0m] [1m[<main>][GuidelineContinuousProposer][LiteLLM Request (GuidelineContinuousPropositionSchema)][LiteLLM Request (GuidelineContinuousPropositionSchema)][LiteLLM Request (GuidelineContinuousPropositionSchema)] LiteLLM Request (GuidelineContinuousPropositionSchema) failed[0m
[2m2025-10-05T10:22:42.644856Z[0m [[31m[1merror    [0m] [1m[<main>][GuidelineContinuousProposer][LiteLLM Request (GuidelineContinuousPropositionSchema)][LiteLLM Request (GuidelineContinuousPropositionSchema)][LiteLLM Request (GuidelineContinuousPropositionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 183, in _make_common_sync_call
    response = sync_httpx_client.post(
               ^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/http_handler.py", line 802, in post
    raise e
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/http_handler.py", line 784, in post
    response.raise_for_status()
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status
    raise HTTPStatusError(message, request=request, response=self)
 httpx.HTTPStatusError: Client error '403 Forbidden' for url 'https://openrouter.ai/api/v1/chat/completions'
For more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403
 
During handling of the above exception, another exception occurred:

 Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/main.py", line 2730, in completion
    response = base_llm_http_handler.completion(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 485, in completion
    response = self._make_common_sync_call(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 208, in _make_common_sync_call
    raise self._handle_error(e=e, provider_config=provider_config)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 3025, in _handle_error
    raise provider_config.get_error_class(
 litellm.llms.openrouter.common_utils.OpenRouterException: {"error":{"message":"Provider returned error","code":403,"metadata":{"raw":"{\"error\":{\"code\":\"unsupported_country_region_territory\",\"message\":\"Country, region, or territory not supported\",\"param\":null,\"type\":\"request_forbidden\"}}","provider_name":"OpenAI"}},"user_id":"user_2uQmigFdRnnn3PM4oWpB4b5i7Lv"}
 
During handling of the above exception, another exception occurred:

 Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 125, in _do_generate
    response = self._client.completion(
               ^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/utils.py", line 1356, in wrapper
    raise e
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/utils.py", line 1231, in wrapper
    result = original_function(*args, **kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/main.py", line 3733, in completion
    raise exception_type(
          ^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py", line 2273, in exception_type
    raise e
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py", line 2206, in exception_type
    raise APIError(
 litellm.exceptions.APIError: litellm.APIError: APIError: OpenrouterException - {"error":{"message":"Provider returned error","code":403,"metadata":{"raw":"{\"error\":{\"code\":\"unsupported_country_region_territory\",\"message\":\"Country, region, or territory not supported\",\"param\":null,\"type\":\"request_forbidden\"}}","provider_name":"OpenAI"}},"user_id":"user_2uQmigFdRnnn3PM4oWpB4b5i7Lv"}
[0m
[2m2025-10-05T10:22:42.655903Z[0m [[33m[1mwarning  [0m] [1m[<main>][GuidelineContinuousProposer][LiteLLM Request (GuidelineContinuousPropositionSchema)][LiteLLM Request (GuidelineContinuousPropositionSchema)][LiteLLM Request (GuidelineContinuousPropositionSchema)] GuidelineContinuousProposer attempt 2 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 183, in _make_common_sync_call\n    response = sync_httpx_client.post(\n               ^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/http_handler.py", line 802, in post\n    raise e\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/http_handler.py", line 784, in post\n    response.raise_for_status()\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status\n    raise HTTPStatusError(message, request=request, response=self)\n', "httpx.HTTPStatusError: Client error '403 Forbidden' for url 'https://openrouter.ai/api/v1/chat/completions'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403\n", '\nDuring handling of the above exception, another exception occurred:\n\n', 'Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/main.py", line 2730, in completion\n    response = base_llm_http_handler.completion(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 485, in completion\n    response = self._make_common_sync_call(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 208, in _make_common_sync_call\n    raise self._handle_error(e=e, provider_config=provider_config)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 3025, in _handle_error\n    raise provider_config.get_error_class(\n', 'litellm.llms.openrouter.common_utils.OpenRouterException: {"error":{"message":"Provider returned error","code":403,"metadata":{"raw":"{\\"error\\":{\\"code\\":\\"unsupported_country_region_territory\\",\\"message\\":\\"Country, region, or territory not supported\\",\\"param\\":null,\\"type\\":\\"request_forbidden\\"}}","provider_name":"OpenAI"}},"user_id":"user_2uQmigFdRnnn3PM4oWpB4b5i7Lv"}\n', '\nDuring handling of the above exception, another exception occurred:\n\n', 'Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/guideline_continuous_proposer.py", line 69, in propose_continuous\n    proposition = await self._generate_continuous(\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/guideline_continuous_proposer.py", line 179, in _generate_continuous\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 125, in _do_generate\n    response = self._client.completion(\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/utils.py", line 1356, in wrapper\n    raise e\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/utils.py", line 1231, in wrapper\n    result = original_function(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/main.py", line 3733, in completion\n    raise exception_type(\n          ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py", line 2273, in exception_type\n    raise e\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py", line 2206, in exception_type\n    raise APIError(\n', 'litellm.exceptions.APIError: litellm.APIError: APIError: OpenrouterException - {"error":{"message":"Provider returned error","code":403,"metadata":{"raw":"{\\"error\\":{\\"code\\":\\"unsupported_country_region_territory\\",\\"message\\":\\"Country, region, or territory not supported\\",\\"param\\":null,\\"type\\":\\"request_forbidden\\"}}","provider_name":"OpenAI"}},"user_id":"user_2uQmigFdRnnn3PM4oWpB4b5i7Lv"}\n'][0m
[2m2025-10-05T10:22:42.657421Z[0m [[32m[1minfo     [0m] [1m[<main>] Evaluation task 'lOBHtFNk04' failed due to the following error: 'Evaluation failed'[0m
[2m2025-10-05T10:22:43.268774Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (2)[0m
[2m2025-10-05T10:22:43.268946Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-05T10:22:43.278236Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 183, in _make_common_sync_call\n    response = sync_httpx_client.post(\n               ^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/http_handler.py", line 802, in post\n    raise e\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/http_handler.py", line 784, in post\n    response.raise_for_status()\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 829, in raise_for_status\n    raise HTTPStatusError(message, request=request, response=self)\n', "httpx.HTTPStatusError: Client error '403 Forbidden' for url 'https://openrouter.ai/api/v1/chat/completions'\nFor more information check: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403\n", '\nDuring handling of the above exception, another exception occurred:\n\n', 'Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/main.py", line 2730, in completion\n    response = base_llm_http_handler.completion(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 485, in completion\n    response = self._make_common_sync_call(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 208, in _make_common_sync_call\n    raise self._handle_error(e=e, provider_config=provider_config)\n          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/llms/custom_httpx/llm_http_handler.py", line 3025, in _handle_error\n    raise provider_config.get_error_class(\n', 'litellm.llms.openrouter.common_utils.OpenRouterException: {"error":{"message":"Provider returned error","code":403,"metadata":{"raw":"{\\"error\\":{\\"code\\":\\"unsupported_country_region_territory\\",\\"message\\":\\"Country, region, or territory not supported\\",\\"param\\":null,\\"type\\":\\"request_forbidden\\"}}","provider_name":"OpenAI"}},"user_id":"user_2uQmigFdRnnn3PM4oWpB4b5i7Lv"}\n', '\nDuring handling of the above exception, another exception occurred:\n\n', 'Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/guideline_continuous_proposer.py", line 69, in propose_continuous\n    proposition = await self._generate_continuous(\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/guideline_continuous_proposer.py", line 179, in _generate_continuous\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 125, in _do_generate\n    response = self._client.completion(\n               ^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/utils.py", line 1356, in wrapper\n    raise e\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/utils.py", line 1231, in wrapper\n    result = original_function(*args, **kwargs)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/main.py", line 3733, in completion\n    raise exception_type(\n          ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py", line 2273, in exception_type\n    raise e\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py", line 2206, in exception_type\n    raise APIError(\n', 'litellm.exceptions.APIError: litellm.APIError: APIError: OpenrouterException - {"error":{"message":"Provider returned error","code":403,"metadata":{"raw":"{\\"error\\":{\\"code\\":\\"unsupported_country_region_territory\\",\\"message\\":\\"Country, region, or territory not supported\\",\\"param\\":null,\\"type\\":\\"request_forbidden\\"}}","provider_name":"OpenAI"}},"user_id":"user_2uQmigFdRnnn3PM4oWpB4b5i7Lv"}\n', '\nThe above exception was the direct cause of the following exception:\n\n', 'Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 746, in evaluate\n    continuous_propositions = await self._propose_continuous(\n                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 864, in _propose_continuous\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/guideline_continuous_proposer.py", line 86, in propose_continuous\n    raise EvaluationError() from last_generation_exception\n', 'parlant.core.services.indexing.common.EvaluationError: Evaluation failed\n'][0m
[2m2025-10-05T10:25:15.207267Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T10:25:15.207558Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T10:25:15.209708Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T10:25:20.811512Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-05T10:25:33.408754Z[0m [[32m[1minfo     [0m] [1m[<main>] .-----------------------------------------.[0m
[2m2025-10-05T10:25:33.409085Z[0m [[32m[1minfo     [0m] [1m[<main>] | Server is ready for some serious action |[0m
[2m2025-10-05T10:25:33.409216Z[0m [[32m[1minfo     [0m] [1m[<main>] '-----------------------------------------'[0m
[2m2025-10-05T10:25:33.409427Z[0m [[32m[1minfo     [0m] [1m[<main>] Server authorization policy: development[0m
[2m2025-10-05T10:25:33.409630Z[0m [[32m[1minfo     [0m] [1m[<main>] Try the Sandbox UI at http://localhost:8800[0m
[2m2025-10-05T10:26:07.155257Z[0m [[32m[1minfo     [0m] [1m[ReY5xmTUwIl::process] Processing context for session hJ5bGt1h7x finished in 8.312 seconds[0m
[2m2025-10-05T10:26:29.529130Z[0m [[32m[1minfo     [0m] [1m[ReS7R19zB8U::process] Processing context for session hJ5bGt1h7x finished in 7.965 seconds[0m
[2m2025-10-05T10:27:08.419168Z[0m [[33m[1mwarning  [0m] [1m[RNvvI3jnCl9] HTTP Request: GET /sessions/hJ5bGt1h7x/events cancelled after 38.815 seconds[0m
[2m2025-10-05T10:27:08.420596Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (2)[0m
[2m2025-10-05T10:27:08.421786Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-05T11:30:25.185290Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T11:30:25.186195Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T11:30:25.191423Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T11:30:38.827639Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-05T11:30:50.532296Z[0m [[32m[1minfo     [0m] [1m[<main>] .-----------------------------------------.[0m
[2m2025-10-05T11:30:50.532929Z[0m [[32m[1minfo     [0m] [1m[<main>] | Server is ready for some serious action |[0m
[2m2025-10-05T11:30:50.533298Z[0m [[32m[1minfo     [0m] [1m[<main>] '-----------------------------------------'[0m
[2m2025-10-05T11:30:50.533500Z[0m [[32m[1minfo     [0m] [1m[<main>] Server authorization policy: development[0m
[2m2025-10-05T11:30:50.533678Z[0m [[32m[1minfo     [0m] [1m[<main>] Try the Sandbox UI at http://localhost:8800[0m
[2m2025-10-05T11:30:50.545046Z[0m [[32m[1minfo     [0m] [1m[RS2poEjQ5zV] Session not found (id='hJ5bGt1h7x')[0m
[2m2025-10-05T11:41:33.276934Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (1)[0m
[2m2025-10-05T11:41:33.285039Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-05T11:41:43.510823Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T11:41:43.511156Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T11:41:43.513559Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T11:41:43.972797Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized OpenAIService[0m
[2m2025-10-05T11:41:48.564062Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (1)[0m
[2m2025-10-05T11:41:48.564487Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-05T11:41:48.564625Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Waiting for task 'websocket-logger' to finish[0m
[2m2025-10-05T11:43:56.640755Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T11:43:56.642141Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T11:43:56.649884Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T11:44:05.133367Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-05T11:44:12.140636Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (1)[0m
[2m2025-10-05T11:44:12.141206Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-05T11:44:12.141444Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Waiting for task 'websocket-logger' to finish[0m
[2m2025-10-05T11:44:19.873818Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T11:44:19.874339Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T11:44:19.878463Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T11:44:34.551675Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T11:44:34.552035Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T11:44:34.555689Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T11:44:43.018686Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-05T11:45:35.570946Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task '8X3Hom3sH9' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T11:45:35.590237Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'TMl3m57DcJ' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T11:45:35.593341Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'cgTvnucylz' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T11:45:35.799306Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (14)[0m
[2m2025-10-05T11:45:35.802785Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T11:45:35.806422Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T11:45:35.812661Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T11:45:35.814254Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-05T11:46:47.155107Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T11:46:47.155479Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T11:46:47.158600Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T11:46:52.911428Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-05T11:47:46.979796Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'NyOjYBww9L' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T11:47:46.986305Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task '25MqIrvWYH' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T11:47:46.987184Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'oZTL794kld' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T11:47:46.987919Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'nvG6z5uPUB' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T11:47:47.191017Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (14)[0m
[2m2025-10-05T11:47:47.192832Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T11:47:47.194457Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T11:47:47.195740Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T11:47:47.197245Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T11:47:47.197970Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-05T11:49:46.576705Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T11:49:46.577368Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T11:49:46.579585Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T11:49:53.750980Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-05T11:50:32.840316Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'G63PvOAMlL' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T11:50:32.849367Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'ziP32Jv5ys' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T11:50:32.850652Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'QJb3KqZeFJ' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T11:50:32.851645Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'uJKWjRLVAG' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T11:50:33.053195Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (10)[0m
[2m2025-10-05T11:50:33.054996Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T11:50:33.056585Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T11:50:33.057708Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T11:50:33.059186Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T11:50:33.060004Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-05T11:51:26.150526Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T11:51:26.151199Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T11:51:26.154083Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T11:51:33.301295Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-05T11:52:04.936157Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task '9LdqUjgkrs' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T11:52:04.949617Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task '6s4L9N4wlX' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T11:52:04.952091Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'XHSgNzbcJ3' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T11:52:04.954284Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'cIHs4XsipA' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T11:52:05.156280Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (10)[0m
[2m2025-10-05T11:52:05.158811Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T11:52:05.161156Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T11:52:05.162357Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T11:52:05.163931Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T11:52:05.164326Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-05T11:53:19.256474Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T11:53:19.256814Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T11:53:19.259082Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T11:53:24.927670Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-05T11:53:48.835352Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'gmlvtEqxnp' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T11:53:48.837663Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'oF0Xkc9txE' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T11:53:48.838407Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'PXFEuW1fyW' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T11:53:49.445539Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (6)[0m
[2m2025-10-05T11:53:49.446567Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T11:53:49.447682Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T11:53:49.448815Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T11:53:49.449243Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-05T11:56:46.037131Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T11:56:46.037459Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T11:56:46.039683Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T11:56:51.900660Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-05T11:56:58.177488Z[0m [[32m[1minfo     [0m] [1m[<main>] .-----------------------------------------.[0m
[2m2025-10-05T11:56:58.177784Z[0m [[32m[1minfo     [0m] [1m[<main>] | Server is ready for some serious action |[0m
[2m2025-10-05T11:56:58.177934Z[0m [[32m[1minfo     [0m] [1m[<main>] '-----------------------------------------'[0m
[2m2025-10-05T11:56:58.178102Z[0m [[32m[1minfo     [0m] [1m[<main>] Server authorization policy: development[0m
[2m2025-10-05T11:56:58.178183Z[0m [[32m[1minfo     [0m] [1m[<main>] Try the Sandbox UI at http://localhost:8800[0m
[2m2025-10-05T11:57:35.892350Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (1)[0m
[2m2025-10-05T11:57:35.892787Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (1)[0m
[2m2025-10-05T11:57:35.892953Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-05T11:57:42.640908Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T11:57:42.641168Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T11:57:42.642971Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T11:57:46.938322Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-05T11:57:57.201581Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'yhSCWg0KEs' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T11:57:57.210959Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'iElBQozgW0' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T11:57:57.211976Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'hHnKqmT7lE' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T11:57:57.730929Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (4)[0m
[2m2025-10-05T11:57:57.732014Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T11:57:57.732981Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T11:57:57.733922Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T11:57:57.734278Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-05T12:01:19.061516Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T12:01:19.061748Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T12:01:19.063556Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T12:01:22.948642Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-05T12:05:28.743177Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (1)[0m
[2m2025-10-05T12:05:28.744487Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-05T12:05:28.744667Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Waiting for task 'websocket-logger' to finish[0m
[2m2025-10-05T12:05:41.731131Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T12:05:41.731511Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T12:05:41.734249Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T12:05:47.177220Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-05T12:05:59.453401Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'dqIIpmejmH' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T12:05:59.467089Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'QmZEsI9aYe' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T12:05:59.470027Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'afnakLfWQv' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T12:05:59.990113Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (4)[0m
[2m2025-10-05T12:05:59.991735Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T12:05:59.993482Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T12:05:59.995721Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T12:05:59.996578Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-05T12:07:14.684837Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T12:07:14.685180Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T12:07:14.687516Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T12:07:20.192674Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-05T12:07:32.859941Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'qi1FSAY90D' failed due to the following error: ''str' object is not callable'[0m
[2m2025-10-05T12:07:32.865510Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'v8bcLB9QQI' failed due to the following error: ''str' object is not callable'[0m
[2m2025-10-05T12:07:33.171025Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task '8ggOZrUXuG' failed due to the following error: ''str' object is not callable'[0m
[2m2025-10-05T12:07:33.405557Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (4)[0m
[2m2025-10-05T12:07:33.406723Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/bin/server.py", line 882, in load_app\n    yield await create_api_app(actual_container), actual_container\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/bin/server.py", line 986, in start_parlant\n    yield container\n', 'GeneratorExit\n', '\nDuring handling of the above exception, another exception occurred:\n\n', 'Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    print(response.text())\n          ^^^^^^^^^^^^^^^\n', "TypeError: 'str' object is not callable\n"][0m
[2m2025-10-05T12:07:33.407874Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/bin/server.py", line 882, in load_app\n    yield await create_api_app(actual_container), actual_container\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/bin/server.py", line 986, in start_parlant\n    yield container\n', 'GeneratorExit\n', '\nDuring handling of the above exception, another exception occurred:\n\n', 'Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    print(response.text())\n          ^^^^^^^^^^^^^^^\n', "TypeError: 'str' object is not callable\n"][0m
[2m2025-10-05T12:07:33.408905Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/bin/server.py", line 882, in load_app\n    yield await create_api_app(actual_container), actual_container\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/bin/server.py", line 986, in start_parlant\n    yield container\n', 'GeneratorExit\n', '\nDuring handling of the above exception, another exception occurred:\n\n', 'Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 778, in list_tools\n    print(response.text())\n          ^^^^^^^^^^^^^^^\n', "TypeError: 'str' object is not callable\n"][0m
[2m2025-10-05T12:07:33.409489Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-05T12:08:00.121099Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T12:08:00.121419Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T12:08:00.123646Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T12:08:06.759465Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-05T12:08:21.164127Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task '2bEzZRPKey' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T12:08:21.173080Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'chB1tM13D0' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T12:08:21.196457Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'UIXfDGuDXP' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T12:08:21.659447Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (4)[0m
[2m2025-10-05T12:08:21.661582Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 779, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T12:08:21.662690Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 779, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T12:08:21.663824Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 779, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T12:08:21.664487Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-05T12:09:41.621463Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T12:09:41.621833Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T12:09:41.624514Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T12:09:48.306962Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-05T12:10:00.307102Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'KhzI9YsQcF' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T12:10:00.313857Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'oThLNFZpgs' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T12:10:00.331149Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'dohWtBtU8Q' failed due to the following error: 'Expecting value: line 1 column 1 (char 0)'[0m
[2m2025-10-05T12:10:00.794077Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (4)[0m
[2m2025-10-05T12:10:00.794974Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 780, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T12:10:00.795842Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 780, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T12:10:00.796741Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 64, in detect_if_tool_running\n    _tools = await service.list_tools()\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 780, in list_tools\n    content = response.json()\n              ^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_models.py", line 832, in json\n    return jsonlib.loads(self.content, **kwargs)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/__init__.py", line 346, in loads\n    return _default_decoder.decode(s)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 337, in decode\n    obj, end = self.raw_decode(s, idx=_w(s, 0).end())\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/json/decoder.py", line 355, in raw_decode\n    raise JSONDecodeError("Expecting value", s, err.value) from None\n', 'json.decoder.JSONDecodeError: Expecting value: line 1 column 1 (char 0)\n'][0m
[2m2025-10-05T12:10:00.797029Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-05T12:11:19.926492Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T12:11:19.926932Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T12:11:19.928804Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T12:11:26.284018Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-05T12:11:33.333370Z[0m [[32m[1minfo     [0m] [1m[<main>] .-----------------------------------------.[0m
[2m2025-10-05T12:11:33.333590Z[0m [[32m[1minfo     [0m] [1m[<main>] | Server is ready for some serious action |[0m
[2m2025-10-05T12:11:33.333681Z[0m [[32m[1minfo     [0m] [1m[<main>] '-----------------------------------------'[0m
[2m2025-10-05T12:11:33.333772Z[0m [[32m[1minfo     [0m] [1m[<main>] Server authorization policy: development[0m
[2m2025-10-05T12:11:33.333857Z[0m [[32m[1minfo     [0m] [1m[<main>] Try the Sandbox UI at http://localhost:8800[0m
[2m2025-10-05T12:12:29.335299Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (1)[0m
[2m2025-10-05T12:12:29.340855Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-05T12:12:37.365398Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T12:12:37.365766Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T12:12:37.368425Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T12:12:42.620847Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-05T12:12:54.929420Z[0m [[32m[1minfo     [0m] [1m[<main>] .-----------------------------------------.[0m
[2m2025-10-05T12:12:54.930331Z[0m [[32m[1minfo     [0m] [1m[<main>] | Server is ready for some serious action |[0m
[2m2025-10-05T12:12:54.930439Z[0m [[32m[1minfo     [0m] [1m[<main>] '-----------------------------------------'[0m
[2m2025-10-05T12:12:54.930541Z[0m [[32m[1minfo     [0m] [1m[<main>] Server authorization policy: development[0m
[2m2025-10-05T12:12:54.930640Z[0m [[32m[1minfo     [0m] [1m[<main>] Try the Sandbox UI at http://localhost:8800[0m
[2m2025-10-05T12:16:58.180131Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (1)[0m
[2m2025-10-05T12:16:58.192723Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-05T12:17:25.800560Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T12:17:25.800882Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T12:17:25.803120Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T12:17:31.674988Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-05T12:17:50.085667Z[0m [[32m[1minfo     [0m] [1m[<main>] .-----------------------------------------.[0m
[2m2025-10-05T12:17:50.085936Z[0m [[32m[1minfo     [0m] [1m[<main>] | Server is ready for some serious action |[0m
[2m2025-10-05T12:17:50.086055Z[0m [[32m[1minfo     [0m] [1m[<main>] '-----------------------------------------'[0m
[2m2025-10-05T12:17:50.086167Z[0m [[32m[1minfo     [0m] [1m[<main>] Server authorization policy: development[0m
[2m2025-10-05T12:17:50.086271Z[0m [[32m[1minfo     [0m] [1m[<main>] Try the Sandbox UI at http://localhost:8800[0m
[2m2025-10-05T12:18:59.827686Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (4)[0m
[2m2025-10-05T12:18:59.857472Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-05T12:19:08.820014Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-05T12:19:08.820306Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-05T12:19:08.822433Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-05T12:19:14.924903Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-05T12:19:40.587710Z[0m [[32m[1minfo     [0m] [1m[<main>] .-----------------------------------------.[0m
[2m2025-10-05T12:19:40.587978Z[0m [[32m[1minfo     [0m] [1m[<main>] | Server is ready for some serious action |[0m
[2m2025-10-05T12:19:40.588097Z[0m [[32m[1minfo     [0m] [1m[<main>] '-----------------------------------------'[0m
[2m2025-10-05T12:19:40.588209Z[0m [[32m[1minfo     [0m] [1m[<main>] Server authorization policy: development[0m
[2m2025-10-05T12:19:40.588312Z[0m [[32m[1minfo     [0m] [1m[<main>] Try the Sandbox UI at http://localhost:8800[0m
[2m2025-10-05T12:20:24.932012Z[0m [[32m[1minfo     [0m] [1m[RajWaJZzuZr::process] Processing context for session 2gJjveLeEI finished in 23.024 seconds[0m
[2m2025-10-05T12:21:32.711177Z[0m [[32m[1minfo     [0m] [1m[RK409DxRQ2a::process] Processing context for session 2gJjveLeEI finished in 22.67 seconds[0m
[2m2025-10-05T12:22:26.624598Z[0m [[32m[1minfo     [0m] [1m[R6vt2QNKSkj::process] Processing context for session 2gJjveLeEI finished in 26.204 seconds[0m
[2m2025-10-05T12:23:18.072261Z[0m [[32m[1minfo     [0m] [1m[R15iX0ARHTX::process] Processing context for session 2gJjveLeEI finished in 36.176 seconds[0m
[2m2025-10-05T12:24:38.593543Z[0m [[32m[1minfo     [0m] [1m[RP5sY66wGV6::process] Processing context for session 2gJjveLeEI finished in 32.094 seconds[0m
[2m2025-10-05T12:26:13.244362Z[0m [[32m[1minfo     [0m] [1m[ReQvtrWdQpt::process] Processing context for session 2gJjveLeEI finished in 27.724 seconds[0m
[2m2025-10-05T12:31:49.177602Z[0m [[33m[1mwarning  [0m] [1m[Rrj0o6Fcily] HTTP Request: GET /sessions/2gJjveLeEI/events cancelled after 35.681 seconds[0m
[2m2025-10-05T12:31:49.193599Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (2)[0m
[2m2025-10-05T12:31:49.218622Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-06T09:25:08.847690Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-06T09:25:08.848384Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-06T09:25:08.851175Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-06T09:25:15.288062Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-06T09:25:38.336098Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-06T09:25:38.336355Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-06T09:25:38.338167Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-06T09:25:42.672353Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-06T09:25:50.633212Z[0m [[32m[1minfo     [0m] [1m[<main>] .-----------------------------------------.[0m
[2m2025-10-06T09:25:50.633951Z[0m [[32m[1minfo     [0m] [1m[<main>] | Server is ready for some serious action |[0m
[2m2025-10-06T09:25:50.634138Z[0m [[32m[1minfo     [0m] [1m[<main>] '-----------------------------------------'[0m
[2m2025-10-06T09:25:50.634284Z[0m [[32m[1minfo     [0m] [1m[<main>] Server authorization policy: development[0m
[2m2025-10-06T09:25:50.634399Z[0m [[32m[1minfo     [0m] [1m[<main>] Try the Sandbox UI at http://localhost:8800[0m
[2m2025-10-06T09:41:15.718954Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (1)[0m
[2m2025-10-06T09:41:15.739052Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-06T09:41:52.194172Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-06T09:41:52.194478Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-06T09:41:52.196632Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-06T09:41:58.890828Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-06T09:42:06.220360Z[0m [[32m[1minfo     [0m] [1m[<main>] .-----------------------------------------.[0m
[2m2025-10-06T09:42:06.220851Z[0m [[32m[1minfo     [0m] [1m[<main>] | Server is ready for some serious action |[0m
[2m2025-10-06T09:42:06.220991Z[0m [[32m[1minfo     [0m] [1m[<main>] '-----------------------------------------'[0m
[2m2025-10-06T09:42:06.221122Z[0m [[32m[1minfo     [0m] [1m[<main>] Server authorization policy: development[0m
[2m2025-10-06T09:42:06.221233Z[0m [[32m[1minfo     [0m] [1m[<main>] Try the Sandbox UI at http://localhost:8800[0m
[2m2025-10-06T09:43:08.167745Z[0m [[33m[1mwarning  [0m] [1m[R04IhLv7aP4::process] Processing cancelled[0m
[2m2025-10-06T09:43:08.169341Z[0m [[33m[1mwarning  [0m] [1m[R04IhLv7aP4::process] Processing context for session wJESkFA59Q cancelled after 31.867 seconds[0m
[2m2025-10-06T09:43:29.508055Z[0m [[32m[1minfo     [0m] [1m[R1hqdCsknbs::process] Processing context for session wJESkFA59Q finished in 21.337 seconds[0m
[2m2025-10-06T09:43:56.324346Z[0m [[33m[1mwarning  [0m] [1m[RJAFc0doyEo] HTTP Request: GET /sessions/wJESkFA59Q/events cancelled after 26.701 seconds[0m
[2m2025-10-06T09:43:56.326219Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (2)[0m
[2m2025-10-06T09:43:56.336342Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-06T09:44:28.210995Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-06T09:44:28.211507Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-06T09:44:28.215142Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-06T09:44:38.240821Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-06T09:44:48.720106Z[0m [[32m[1minfo     [0m] [1m[<main>] .-----------------------------------------.[0m
[2m2025-10-06T09:44:48.720478Z[0m [[32m[1minfo     [0m] [1m[<main>] | Server is ready for some serious action |[0m
[2m2025-10-06T09:44:48.720630Z[0m [[32m[1minfo     [0m] [1m[<main>] '-----------------------------------------'[0m
[2m2025-10-06T09:44:48.720775Z[0m [[32m[1minfo     [0m] [1m[<main>] Server authorization policy: development[0m
[2m2025-10-06T09:44:48.721100Z[0m [[32m[1minfo     [0m] [1m[<main>] Try the Sandbox UI at http://localhost:8800[0m
[2m2025-10-06T09:44:48.733681Z[0m [[32m[1minfo     [0m] [1m[RwCjxiNDC6H] Session not found (id='wJESkFA59Q')[0m
[2m2025-10-06T09:45:23.943411Z[0m [[32m[1minfo     [0m] [1m[Rp8xRKuGiuX::process] Processing context for session Eg3ZhPyoBA finished in 18.927 seconds[0m
[2m2025-10-06T09:46:46.552258Z[0m [[33m[1mwarning  [0m] [1m[RxQ2STi8Afm] HTTP Request: GET /sessions/Eg3ZhPyoBA/events cancelled after 22.548 seconds[0m
[2m2025-10-06T09:46:46.553262Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (2)[0m
[2m2025-10-06T09:46:46.563129Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-06T09:46:54.368699Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-06T09:46:54.369236Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-06T09:46:54.373153Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-06T09:47:03.490429Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-06T09:47:13.013095Z[0m [[32m[1minfo     [0m] [1m[<main>] .-----------------------------------------.[0m
[2m2025-10-06T09:47:13.013537Z[0m [[32m[1minfo     [0m] [1m[<main>] | Server is ready for some serious action |[0m
[2m2025-10-06T09:47:13.013931Z[0m [[32m[1minfo     [0m] [1m[<main>] '-----------------------------------------'[0m
[2m2025-10-06T09:47:13.014209Z[0m [[32m[1minfo     [0m] [1m[<main>] Server authorization policy: development[0m
[2m2025-10-06T09:47:13.014349Z[0m [[32m[1minfo     [0m] [1m[<main>] Try the Sandbox UI at http://localhost:8800[0m
[2m2025-10-06T09:47:13.026327Z[0m [[32m[1minfo     [0m] [1m[RyDcUdfSFBZ] Session not found (id='Eg3ZhPyoBA')[0m
[2m2025-10-06T09:47:54.131405Z[0m [[32m[1minfo     [0m] [1m[Rn4HGa69li8::process] Processing context for session u0J1Ic863T finished in 22.061 seconds[0m
[2m2025-10-06T09:49:07.716209Z[0m [[32m[1minfo     [0m] [1m[Riwn2dJZPpi::process] Processing context for session u0J1Ic863T finished in 32.055 seconds[0m
[2m2025-10-07T14:38:36.906978Z[0m [[33m[1mwarning  [0m] [1m[RWIPEPurvWI] HTTP Request: GET /sessions/u0J1Ic863T/events cancelled after 23.989 seconds[0m
[2m2025-10-07T14:38:36.995563Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (2)[0m
[2m2025-10-07T14:38:37.080976Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-08T05:49:47.222508Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-08T05:49:47.223410Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-08T05:49:47.228456Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-08T05:49:48.062297Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized OpenAIService[0m
[2m2025-10-08T05:50:00.673373Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (1)[0m
[2m2025-10-08T05:50:00.673887Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-08T05:50:00.674304Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Waiting for task 'websocket-logger' to finish[0m
[2m2025-10-08T05:50:28.676844Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-08T05:50:28.677385Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-08T05:50:28.681627Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-08T05:50:41.261630Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-08T05:51:39.898624Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[
  {
    "action": "Use the tool deposit_query",
    "rational": "The action only involves running the deposit_query tool without any user communication.",
    "is_tool_running_only": true
  }
][0m
[2m2025-10-08T05:51:39.907778Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] LiteLLM Request (ToolRunningActionSchema) failed[0m
[2m2025-10-08T05:51:39.909624Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema
  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T05:51:39.913687Z[0m [[33m[1mwarning  [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] ToolRunningActionDetector attempt 0 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T05:51:47.646098Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (9)[0m
[2m2025-10-08T05:51:47.646480Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-08T05:51:47.646684Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Waiting for task 'websocket-logger' to finish[0m
[2m2025-10-08T06:04:47.435081Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-08T06:04:47.435815Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-08T06:04:47.438937Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-08T06:04:56.961676Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-08T06:05:21.699310Z[0m [[31m[1merror    [0m] [1m[<main>][CustomerDependentActionDetector][LiteLLM Request (CustomerDependentActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[  
  {  
    "action": "向咨询人回复已创建协同工单转交客资同时进一步排查，请耐心等待",  
    "is_customer_dependent": false  
  }  
][0m
[2m2025-10-08T06:05:21.711024Z[0m [[31m[1merror    [0m] [1m[<main>][CustomerDependentActionDetector][LiteLLM Request (CustomerDependentActionSchema)] LiteLLM Request (CustomerDependentActionSchema) failed[0m
[2m2025-10-08T06:05:21.712345Z[0m [[31m[1merror    [0m] [1m[<main>][CustomerDependentActionDetector][LiteLLM Request (CustomerDependentActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for CustomerDependentActionSchema
  Input should be a valid dictionary or instance of CustomerDependentActionSchema [type=model_type, input_value=[{'action': '向咨询人...omer_dependent': False}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:05:21.715963Z[0m [[33m[1mwarning  [0m] [1m[<main>][CustomerDependentActionDetector][LiteLLM Request (CustomerDependentActionSchema)] CustomerDependentActionDetector attempt 0 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/customer_dependent_action_detector.py", line 82, in detect_if_customer_dependent\n    proposition = await self._generate_customer_dependent(\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/customer_dependent_action_detector.py", line 197, in _generate_customer_dependent\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for CustomerDependentActionSchema\n  Input should be a valid dictionary or instance of CustomerDependentActionSchema [type=model_type, input_value=[{'action': '向咨询人...omer_dependent': False}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:05:23.595393Z[0m [[31m[1merror    [0m] [1m[<main>][CustomerDependentActionDetector][LiteLLM Request (CustomerDependentActionSchema)][LiteLLM Request (CustomerDependentActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[  
  {  
    "action": "向咨询人回复已创建协同工单转交客资同时进一步排查，请耐心等待",  
    "is_customer_dependent": false  
  }  
][0m
[2m2025-10-08T06:05:23.597629Z[0m [[31m[1merror    [0m] [1m[<main>][CustomerDependentActionDetector][LiteLLM Request (CustomerDependentActionSchema)][LiteLLM Request (CustomerDependentActionSchema)] LiteLLM Request (CustomerDependentActionSchema) failed[0m
[2m2025-10-08T06:05:23.599458Z[0m [[31m[1merror    [0m] [1m[<main>][CustomerDependentActionDetector][LiteLLM Request (CustomerDependentActionSchema)][LiteLLM Request (CustomerDependentActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for CustomerDependentActionSchema
  Input should be a valid dictionary or instance of CustomerDependentActionSchema [type=model_type, input_value=[{'action': '向咨询人...omer_dependent': False}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:05:23.601550Z[0m [[33m[1mwarning  [0m] [1m[<main>][CustomerDependentActionDetector][LiteLLM Request (CustomerDependentActionSchema)][LiteLLM Request (CustomerDependentActionSchema)] CustomerDependentActionDetector attempt 1 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/customer_dependent_action_detector.py", line 82, in detect_if_customer_dependent\n    proposition = await self._generate_customer_dependent(\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/customer_dependent_action_detector.py", line 197, in _generate_customer_dependent\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for CustomerDependentActionSchema\n  Input should be a valid dictionary or instance of CustomerDependentActionSchema [type=model_type, input_value=[{'action': '向咨询人...omer_dependent': False}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:05:25.146244Z[0m [[31m[1merror    [0m] [1m[<main>][CustomerDependentActionDetector][LiteLLM Request (CustomerDependentActionSchema)][LiteLLM Request (CustomerDependentActionSchema)][LiteLLM Request (CustomerDependentActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[
  {
    "action": "向咨询人回复已创建协同工单转交客资同时进一步排查，请耐心等待",
    "is_customer_dependent": false
  }
][0m
[2m2025-10-08T06:05:25.148948Z[0m [[31m[1merror    [0m] [1m[<main>][CustomerDependentActionDetector][LiteLLM Request (CustomerDependentActionSchema)][LiteLLM Request (CustomerDependentActionSchema)][LiteLLM Request (CustomerDependentActionSchema)] LiteLLM Request (CustomerDependentActionSchema) failed[0m
[2m2025-10-08T06:05:25.149604Z[0m [[31m[1merror    [0m] [1m[<main>][CustomerDependentActionDetector][LiteLLM Request (CustomerDependentActionSchema)][LiteLLM Request (CustomerDependentActionSchema)][LiteLLM Request (CustomerDependentActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for CustomerDependentActionSchema
  Input should be a valid dictionary or instance of CustomerDependentActionSchema [type=model_type, input_value=[{'action': '向咨询人...omer_dependent': False}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:05:25.150284Z[0m [[33m[1mwarning  [0m] [1m[<main>][CustomerDependentActionDetector][LiteLLM Request (CustomerDependentActionSchema)][LiteLLM Request (CustomerDependentActionSchema)][LiteLLM Request (CustomerDependentActionSchema)] CustomerDependentActionDetector attempt 2 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/customer_dependent_action_detector.py", line 82, in detect_if_customer_dependent\n    proposition = await self._generate_customer_dependent(\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/customer_dependent_action_detector.py", line 197, in _generate_customer_dependent\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for CustomerDependentActionSchema\n  Input should be a valid dictionary or instance of CustomerDependentActionSchema [type=model_type, input_value=[{'action': '向咨询人...omer_dependent': False}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:05:53.060990Z[0m [[32m[1minfo     [0m] [1m[<main>] Evaluation task 'uXdTjVKwWd' failed due to the following error: 'Evaluation failed'[0m
[2m2025-10-08T06:05:55.047184Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[  
  {  
    "action": "Use the tool check_va_expection",  
    "rational": "The action only involves running a tool without any user communication",  
    "is_tool_running_only": true  
  }  
][0m
[2m2025-10-08T06:05:55.063736Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] LiteLLM Request (ToolRunningActionSchema) failed[0m
[2m2025-10-08T06:05:55.081090Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema
  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:05:55.086882Z[0m [[33m[1mwarning  [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] ToolRunningActionDetector attempt 0 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:05:57.151786Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[  
  {  
    "action": "Use the tool check_va_expection",  
    "rational": "The action only involves running a tool without any user communication",  
    "is_tool_running_only": true  
  }  
][0m
[2m2025-10-08T06:05:57.153816Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] LiteLLM Request (ToolRunningActionSchema) failed[0m
[2m2025-10-08T06:05:57.155042Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema
  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:05:57.156179Z[0m [[33m[1mwarning  [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] ToolRunningActionDetector attempt 1 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:05:59.152040Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (10)[0m
[2m2025-10-08T06:05:59.155428Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/customer_dependent_action_detector.py", line 82, in detect_if_customer_dependent\n    proposition = await self._generate_customer_dependent(\n                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/customer_dependent_action_detector.py", line 197, in _generate_customer_dependent\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for CustomerDependentActionSchema\n  Input should be a valid dictionary or instance of CustomerDependentActionSchema [type=model_type, input_value=[{'action': '向咨询人...omer_dependent': False}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n", '\nThe above exception was the direct cause of the following exception:\n\n', 'Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 752, in evaluate\n    customer_dependant_action_detections = await self._detect_customer_dependant_actions(\n                                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 827, in _detect_customer_dependant_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/customer_dependent_action_detector.py", line 102, in detect_if_customer_dependent\n    raise EvaluationError() from last_generation_exception\n', 'parlant.core.services.indexing.common.EvaluationError: Evaluation failed\n'][0m
[2m2025-10-08T06:05:59.156609Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-08T06:08:28.971131Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-08T06:08:28.971596Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-08T06:08:28.975790Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-08T06:08:39.079931Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-08T06:09:51.622672Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[  
  {  
    "action": "Use the tool check_va_expection",  
    "rational": "The action only involves running a tool without any user communication",  
    "is_tool_running_only": true  
  }  
][0m
[2m2025-10-08T06:09:51.628439Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] LiteLLM Request (ToolRunningActionSchema) failed[0m
[2m2025-10-08T06:09:51.629388Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema
  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:09:51.631283Z[0m [[33m[1mwarning  [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] ToolRunningActionDetector attempt 0 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:09:53.732494Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[  
  {  
    "action": "Use the tool check_va_expection",  
    "rational": "only involves running a tool without any user-facing communication",  
    "is_tool_running_only": true  
  }  
][0m
[2m2025-10-08T06:09:53.734536Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] LiteLLM Request (ToolRunningActionSchema) failed[0m
[2m2025-10-08T06:09:53.735339Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema
  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:09:53.736042Z[0m [[33m[1mwarning  [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] ToolRunningActionDetector attempt 1 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:09:57.662855Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[
  {
    "action": "Use the tool check_va_expection",
    "rational": "The action only involves running a tool without any communication to the user.",
    "is_tool_running_only": true
  }
][0m
[2m2025-10-08T06:09:57.664633Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] LiteLLM Request (ToolRunningActionSchema) failed[0m
[2m2025-10-08T06:09:57.665304Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema
  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:09:57.665950Z[0m [[33m[1mwarning  [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] ToolRunningActionDetector attempt 2 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:09:57.669149Z[0m [[32m[1minfo     [0m] [1m[<main>] Evaluation task 'O95XQaujuy' failed due to the following error: 'Evaluation failed'[0m
[2m2025-10-08T06:09:59.573549Z[0m [[31m[1merror    [0m] [1m[<main>] Evaluation task 'Qgp6QR1vBp' failed due to the following error: ''[0m
[2m2025-10-08T06:10:00.197278Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (10)[0m
[2m2025-10-08T06:10:00.199174Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n", '\nThe above exception was the direct cause of the following exception:\n\n', 'Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 99, in detect_if_tool_running\n    raise EvaluationError() from last_generation_exception\n', 'parlant.core.services.indexing.common.EvaluationError: Evaluation failed\n'][0m
[2m2025-10-08T06:10:00.202278Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions\n    yield\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 394, in handle_async_request\n    resp = await self._pool.handle_async_request(req)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpcore/_async/connection_pool.py", line 256, in handle_async_request\n    raise exc from None\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpcore/_async/connection_pool.py", line 236, in handle_async_request\n    response = await connection.handle_async_request(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpcore/_async/connection.py", line 103, in handle_async_request\n    return await self._connection.handle_async_request(request)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpcore/_async/http11.py", line 136, in handle_async_request\n    raise exc\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpcore/_async/http11.py", line 106, in handle_async_request\n    ) = await self._receive_response_headers(**kwargs)\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpcore/_async/http11.py", line 177, in _receive_response_headers\n    event = await self._receive_event(timeout=timeout)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpcore/_async/http11.py", line 217, in _receive_event\n    data = await self._network_stream.read(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpcore/_backends/anyio.py", line 32, in read\n    with map_exceptions(exc_map):\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/contextlib.py", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions\n    raise to_exc(exc) from exc\n', 'httpcore.ReadError\n', '\nThe above exception was the direct cause of the following exception:\n\n', 'Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 65, in detect_if_tool_running\n    tool = await service.read_tool(tid.tool_name)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/tools/plugins.py", line 795, in read_tool\n    response = await self._http_client.get(self._get_url(f"/tools/{name}"))\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1768, in get\n    return await self.request(\n           ^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1540, in request\n    return await self.send(request, auth=auth, follow_redirects=follow_redirects)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1629, in send\n    response = await self._send_handling_auth(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1657, in _send_handling_auth\n    response = await self._send_handling_redirects(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1694, in _send_handling_redirects\n    response = await self._send_single_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_client.py", line 1730, in _send_single_request\n    response = await transport.handle_async_request(request)\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 393, in handle_async_request\n    with map_httpcore_exceptions():\n', '  File "/Users/leozdgao/.local/share/uv/python/cpython-3.11.13-macos-x86_64-none/lib/python3.11/contextlib.py", line 158, in __exit__\n    self.gen.throw(typ, value, traceback)\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions\n    raise mapped_exc(message) from exc\n', 'httpx.ReadError\n'][0m
[2m2025-10-08T06:10:00.204312Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-08T06:13:20.962388Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-08T06:13:20.963255Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-08T06:13:20.967304Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-08T06:13:31.876679Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-08T06:15:01.952724Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[
  {
    "action": "Use the tool check_va_expection",
    "rational": "The action only involves running a tool without any user communication",
    "is_tool_running_only": true
  }
][0m
[2m2025-10-08T06:15:01.961318Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] LiteLLM Request (ToolRunningActionSchema) failed[0m
[2m2025-10-08T06:15:01.963004Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema
  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:15:01.965511Z[0m [[33m[1mwarning  [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] ToolRunningActionDetector attempt 0 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:15:07.121269Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[
  {
    "action": "Use the tool check_va_expection",
    "rational": "The action only involves running a tool without any communication to the user.",
    "is_tool_running_only": true
  }
][0m
[2m2025-10-08T06:15:07.123206Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] LiteLLM Request (ToolRunningActionSchema) failed[0m
[2m2025-10-08T06:15:07.123820Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema
  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:15:07.124567Z[0m [[33m[1mwarning  [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] ToolRunningActionDetector attempt 1 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:15:09.299365Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[
  {
    "action": "Use the tool check_va_expection",
    "rational": "The action only involves running a tool without any user communication",
    "is_tool_running_only": true
  }
][0m
[2m2025-10-08T06:15:09.301135Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] LiteLLM Request (ToolRunningActionSchema) failed[0m
[2m2025-10-08T06:15:09.301802Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema
  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:15:09.302409Z[0m [[33m[1mwarning  [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] ToolRunningActionDetector attempt 2 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:15:09.304839Z[0m [[32m[1minfo     [0m] [1m[<main>] Evaluation task 'TuLFnjnRFN' failed due to the following error: 'Evaluation failed'[0m
[2m2025-10-08T06:15:11.949027Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[
  {
    "action": "Use the tool check_dispute_retrieval",
    "rational": "The action only involves running the tool without any user communication",
    "is_tool_running_only": true
  }
][0m
[2m2025-10-08T06:15:11.950822Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] LiteLLM Request (ToolRunningActionSchema) failed[0m
[2m2025-10-08T06:15:11.951559Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema
  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:15:11.952282Z[0m [[33m[1mwarning  [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] ToolRunningActionDetector attempt 0 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:15:16.030165Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[
  {
    "action": "Use the tool check_dispute_retrieval",
    "rational": "The action only involves running a tool without any communication to the user",
    "is_tool_running_only": true
  }
][0m
[2m2025-10-08T06:15:16.032121Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] LiteLLM Request (ToolRunningActionSchema) failed[0m
[2m2025-10-08T06:15:16.032803Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema
  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:15:16.033674Z[0m [[33m[1mwarning  [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] ToolRunningActionDetector attempt 1 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:15:18.749346Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[  
  {  
    "action": "Use the tool check_dispute_retrieval",  
    "rational": "The action only involves running the tool without any user-facing communication.",  
    "is_tool_running_only": true  
  }  
][0m
[2m2025-10-08T06:15:18.751552Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] LiteLLM Request (ToolRunningActionSchema) failed[0m
[2m2025-10-08T06:15:18.752178Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema
  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:15:18.753134Z[0m [[33m[1mwarning  [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] ToolRunningActionDetector attempt 2 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:15:18.755843Z[0m [[32m[1minfo     [0m] [1m[<main>] Evaluation task 'aI3mqjXZC7' failed due to the following error: 'Evaluation failed'[0m
[2m2025-10-08T06:15:19.381003Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (5)[0m
[2m2025-10-08T06:15:19.383419Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n", '\nThe above exception was the direct cause of the following exception:\n\n', 'Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 99, in detect_if_tool_running\n    raise EvaluationError() from last_generation_exception\n', 'parlant.core.services.indexing.common.EvaluationError: Evaluation failed\n'][0m
[2m2025-10-08T06:15:19.385354Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n", '\nThe above exception was the direct cause of the following exception:\n\n', 'Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 99, in detect_if_tool_running\n    raise EvaluationError() from last_generation_exception\n', 'parlant.core.services.indexing.common.EvaluationError: Evaluation failed\n'][0m
[2m2025-10-08T06:15:19.386235Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-08T06:20:04.805398Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-08T06:20:04.806122Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-08T06:20:04.810730Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-08T06:20:15.600127Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-08T06:20:32.312914Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[
    {
        "action": "Use the tool check_va_expection",
        "rational": "The action only involves running a tool without any user communication",
        "is_tool_running_only": true
    }
][0m
[2m2025-10-08T06:20:32.319557Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] LiteLLM Request (ToolRunningActionSchema) failed[0m
[2m2025-10-08T06:20:32.320205Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema
  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:20:32.321874Z[0m [[33m[1mwarning  [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] ToolRunningActionDetector attempt 0 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:20:35.305001Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[  
  {  
    "action": "Use the tool check_va_expection",  
    "rational": "The action only involves running a tool without any user communication",  
    "is_tool_running_only": true  
  }  
][0m
[2m2025-10-08T06:20:35.306964Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] LiteLLM Request (ToolRunningActionSchema) failed[0m
[2m2025-10-08T06:20:35.307826Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema
  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:20:35.308709Z[0m [[33m[1mwarning  [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] ToolRunningActionDetector attempt 1 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:20:41.505815Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[
  {
    "action": "Use the tool check_dispute_retrieval",
    "rational": "The action only involves running a tool without any communication to the user.",
    "is_tool_running_only": true
  }
][0m
[2m2025-10-08T06:20:41.508939Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] LiteLLM Request (ToolRunningActionSchema) failed[0m
[2m2025-10-08T06:20:41.509704Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema
  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:20:41.510646Z[0m [[33m[1mwarning  [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] ToolRunningActionDetector attempt 0 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:20:44.166171Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[
  {
    "action": "Use the tool check_dispute_retrieval",
    "rational": "The action only involves running the tool without any user communication",
    "is_tool_running_only": true
  }
][0m
[2m2025-10-08T06:20:44.188219Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] LiteLLM Request (ToolRunningActionSchema) failed[0m
[2m2025-10-08T06:20:44.189223Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema
  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:20:44.190051Z[0m [[33m[1mwarning  [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] ToolRunningActionDetector attempt 1 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:20:47.082046Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[
    {
        "action": "Use the tool check_dispute_retrieval",
        "rational": "The action only involves running a tool without any user communication",
        "is_tool_running_only": true
    }
][0m
[2m2025-10-08T06:20:47.084640Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] LiteLLM Request (ToolRunningActionSchema) failed[0m
[2m2025-10-08T06:20:47.085555Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema
  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:20:47.086389Z[0m [[33m[1mwarning  [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] ToolRunningActionDetector attempt 2 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:20:47.087887Z[0m [[32m[1minfo     [0m] [1m[<main>] Evaluation task 'vOe1XKgDfL' failed due to the following error: 'Evaluation failed'[0m
[2m2025-10-08T06:20:47.709975Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (3)[0m
[2m2025-10-08T06:20:47.711892Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n", '\nThe above exception was the direct cause of the following exception:\n\n', 'Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 99, in detect_if_tool_running\n    raise EvaluationError() from last_generation_exception\n', 'parlant.core.services.indexing.common.EvaluationError: Evaluation failed\n'][0m
[2m2025-10-08T06:20:47.712456Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-08T06:24:13.695241Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-08T06:24:13.695949Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-08T06:24:13.699642Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-08T06:24:24.303769Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-08T06:24:40.864218Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[
  {
    "action": "Use the tool check_dispute_retrieval",
    "rational": "The action only involves running a tool without any communication to the user.",
    "is_tool_running_only": true
  }
][0m
[2m2025-10-08T06:24:40.871282Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] LiteLLM Request (ToolRunningActionSchema) failed[0m
[2m2025-10-08T06:24:40.872652Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema
  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:24:40.876164Z[0m [[33m[1mwarning  [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] ToolRunningActionDetector attempt 0 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:24:43.613750Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[
  {
    "action": "Use the tool check_dispute_retrieval",
    "rational": "The action only involves running the tool without any user communication",
    "is_tool_running_only": true
  }
][0m
[2m2025-10-08T06:24:43.617075Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] LiteLLM Request (ToolRunningActionSchema) failed[0m
[2m2025-10-08T06:24:43.617848Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema
  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:24:43.618928Z[0m [[33m[1mwarning  [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] ToolRunningActionDetector attempt 1 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:24:45.337093Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[  
  {  
    "action": "Use the tool check_dispute_retrieval",  
    "rational": "The action only involves running the tool without any user communication",  
    "is_tool_running_only": true  
  }  
][0m
[2m2025-10-08T06:24:45.339370Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] LiteLLM Request (ToolRunningActionSchema) failed[0m
[2m2025-10-08T06:24:45.340058Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema
  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:24:45.340731Z[0m [[33m[1mwarning  [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)][LiteLLM Request (ToolRunningActionSchema)] ToolRunningActionDetector attempt 2 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:24:45.342058Z[0m [[32m[1minfo     [0m] [1m[<main>] Evaluation task 'R02QKMCfBG' failed due to the following error: 'Evaluation failed'[0m
[2m2025-10-08T06:24:45.966080Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (2)[0m
[2m2025-10-08T06:24:45.968005Z[0m [[33m[1mwarning  [0m] [1m[<main>] BackgroundTaskService: Awaited task raised an exception: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 151, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n", '\nThe above exception was the direct cause of the following exception:\n\n', 'Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/background_tasks.py", line 130, in _await_task\n    await task\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 1021, in _run_evaluation\n    guideline_evaluation_data, journey_evaluation_data = await async_utils.safe_gather(\n                                                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 760, in evaluate\n    tool_running_action_propositions = await self._detect_tool_running_actions(\n                                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/behavioral_change_evaluation.py", line 926, in _detect_tool_running_actions\n    sparse_results = await async_utils.safe_gather(*tasks)\n                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/async_utils.py", line 148, in safe_gather\n    return await asyncio.gather(\n           ^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 99, in detect_if_tool_running\n    raise EvaluationError() from last_generation_exception\n', 'parlant.core.services.indexing.common.EvaluationError: Evaluation failed\n'][0m
[2m2025-10-08T06:24:45.968502Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-08T06:25:08.909461Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-08T06:25:08.910129Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-08T06:25:08.916012Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-08T06:25:17.692991Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-08T06:25:33.307565Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] JSON content returned by litellm/openrouter/deepseek/deepseek-chat-v3-0324 does not match expected schema:
[
    {
        "action": "Use the tool check_dispute_retrieval",
        "rational": "The action only involves running the tool without any user communication",
        "is_tool_running_only": true
    }
][0m
[2m2025-10-08T06:25:33.311674Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] LiteLLM Request (ToolRunningActionSchema) failed[0m
[2m2025-10-08T06:25:33.313045Z[0m [[31m[1merror    [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] Traceback (most recent call last):
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 275, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/loggers.py", line 411, in operation
    yield
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate
    return await self._do_generate(prompt, hints)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 152, in _do_generate
    content = self.schema.model_validate(json_content)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
   File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema
  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]
    For further information visit https://errors.pydantic.dev/2.11/v/model_type
[0m
[2m2025-10-08T06:25:33.315441Z[0m [[33m[1mwarning  [0m] [1m[<main>][ToolRunningActionDetector][LiteLLM Request (ToolRunningActionSchema)] ToolRunningActionDetector attempt 0 failed: ['Traceback (most recent call last):\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 79, in detect_if_tool_running\n    result = await self._generate_tool_running(\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/core/services/indexing/tool_running_action_detector.py", line 250, in _generate_tool_running\n    response = await self._schematic_generator.generate(\n               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 109, in generate\n    return await self._do_generate(prompt, hints)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/parlant/adapters/nlp/litellm_service.py", line 152, in _do_generate\n    content = self.schema.model_validate(json_content)\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', '  File "/Users/leozdgao/workspace/playground/py-game/.venv/lib/python3.11/site-packages/pydantic/main.py", line 705, in model_validate\n    return cls.__pydantic_validator__.validate_python(\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n', "pydantic_core._pydantic_core.ValidationError: 1 validation error for ToolRunningActionSchema\n  Input should be a valid dictionary or instance of ToolRunningActionSchema [type=model_type, input_value=[{'action': 'Use the tool...ol_running_only': True}], input_type=list]\n    For further information visit https://errors.pydantic.dev/2.11/v/model_type\n"][0m
[2m2025-10-08T06:25:35.359140Z[0m [[32m[1minfo     [0m] [1m[<main>] .-----------------------------------------.[0m
[2m2025-10-08T06:25:35.359332Z[0m [[32m[1minfo     [0m] [1m[<main>] | Server is ready for some serious action |[0m
[2m2025-10-08T06:25:35.359614Z[0m [[32m[1minfo     [0m] [1m[<main>] '-----------------------------------------'[0m
[2m2025-10-08T06:25:35.359740Z[0m [[32m[1minfo     [0m] [1m[<main>] Server authorization policy: development[0m
[2m2025-10-08T06:25:35.359845Z[0m [[32m[1minfo     [0m] [1m[<main>] Try the Sandbox UI at http://localhost:8800[0m
[2m2025-10-08T06:25:35.364445Z[0m [[32m[1minfo     [0m] [1m[ROEKFVAl2jc] Session not found (id='u0J1Ic863T')[0m
[2m2025-10-08T06:27:05.183290Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (2)[0m
[2m2025-10-08T06:27:05.192148Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
[2m2025-10-08T06:27:12.945114Z[0m [[32m[1minfo     [0m] [1m[<main>] Parlant server version 3.0.2[0m
[2m2025-10-08T06:27:12.945409Z[0m [[32m[1minfo     [0m] [1m[<main>] Using home directory '/Users/leozdgao/workspace/playground/py-game/parlant-data'[0m
[2m2025-10-08T06:27:12.947513Z[0m [[32m[1minfo     [0m] [1m[<main>] No external modules selected[0m
[2m2025-10-08T06:27:19.065640Z[0m [[32m[1minfo     [0m] [1m[<main>] Initialized LiteLLMService[0m
[2m2025-10-08T06:27:26.164273Z[0m [[32m[1minfo     [0m] [1m[<main>] .-----------------------------------------.[0m
[2m2025-10-08T06:27:26.165364Z[0m [[32m[1minfo     [0m] [1m[<main>] | Server is ready for some serious action |[0m
[2m2025-10-08T06:27:26.165521Z[0m [[32m[1minfo     [0m] [1m[<main>] '-----------------------------------------'[0m
[2m2025-10-08T06:27:26.165657Z[0m [[32m[1minfo     [0m] [1m[<main>] Server authorization policy: development[0m
[2m2025-10-08T06:27:26.165782Z[0m [[32m[1minfo     [0m] [1m[<main>] Try the Sandbox UI at http://localhost:8800[0m
[2m2025-10-08T07:40:20.895436Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Cancelling all remaining tasks (1)[0m
[2m2025-10-08T07:40:20.918936Z[0m [[32m[1minfo     [0m] [1m[<main>] BackgroundTaskService: Shutting down[0m
